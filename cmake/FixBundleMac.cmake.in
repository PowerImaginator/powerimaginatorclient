include(BundleUtilities)

# Set bundle to the full path name of the bundle created by CPack
set(bundle "${CMAKE_INSTALL_PREFIX}/@PROJECT_NAME@.app")

# Set other_libs to a list of full path names to additional
# libraries that cannot be reached by dependency analysis.
set(other_libs "")

# Set dirs to a list of directories where prerequisite libraries
# may be found:
set(dirs
   "/opt/homebrew/lib"
   "/usr/local/lib"
   )

fixup_bundle("${bundle}" "${other_libs}" "${dirs}")

# Re-sign the app after fixup_bundle modifies it
execute_process(COMMAND codesign --force --deep --sign - "${bundle}")
